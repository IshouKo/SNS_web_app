<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>本人確認 - era</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background-color: #f0f2f5;
        }
        .dark body {
            background-color: #18191a;
        }
        .dark .bg-white {
            background-color: #242526 !important;
        }
        .dark .text-gray-800 {
            color: #e4e6eb !important;
        }
        .dark .text-gray-600, .dark .text-gray-500 {
            color: #b0b3b8 !important;
        }
        .dark .border-gray-200 {
            border-color: #3e4042 !important;
        }
        .dark .bg-gray-100 {
            background-color: #3a3b3c !important;
        }
        .tab-active {
            border-color: #3b82f6 !important;
            color: #3b82f6 !important;
            background-color: rgba(59, 130, 246, 0.1);
        }
    </style>
</head>
<body class="dark:bg-black">

    <div class="min-h-screen flex flex-col items-center justify-center py-6 sm:py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-xl w-full space-y-8">
            <div>
                 <div class="flex items-center justify-center space-x-2">
                    <div class="w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center">
                        <i data-lucide="zap" class="text-white w-6 sm:w-7 h-6 sm:h-7"></i>
                    </div>
                </div>
                <h2 class="mt-6 text-center text-xl sm:text-2xl font-bold text-gray-800 dark:text-gray-200">
                   本人確認
                </h2>
                <p class="mt-2 text-center text-sm text-gray-600 dark:text-gray-400">
                   アカウントの安全性を高めるため、本人確認にご協力ください。
                </p>
            </div>
            
            <div class="bg-white dark:bg-gray-800 p-4 sm:p-8 rounded-xl shadow-md space-y-6">
                
                <div>
                    <h3 class="text-lg font-semibold text-gray-800">1. 提出する書類を選択</h3>
                    <div id="doc-tabs" class="grid grid-cols-1 sm:grid-cols-3 gap-2 mt-3">
                        <button data-doc="my-number" class="doc-tab tab-active flex flex-col items-center p-3 border-2 border-gray-200 rounded-lg">
                            <i data-lucide="contact" class="w-8 h-8 mb-1"></i>
                            <span class="text-sm font-semibold text-center">マイナンバーカード</span>
                        </button>
                        <button data-doc="license" class="doc-tab flex flex-col items-center p-3 border-2 border-gray-200 rounded-lg">
                            <i data-lucide="car" class="w-8 h-8 mb-1"></i>
                            <span class="text-sm font-semibold text-center">運転免許証</span>
                        </button>
                        <button data-doc="health-insurance" class="doc-tab flex flex-col items-center p-3 border-2 border-gray-200 rounded-lg">
                             <i data-lucide="heart-pulse" class="w-8 h-8 mb-1"></i>
                            <span class="text-sm font-semibold text-center">健康保険証 + 学生証</span>
                        </button>
                    </div>
                </div>

                <div>
                    <h3 class="text-lg font-semibold text-gray-800">2. カメラで撮影</h3>
                    
                    <div id="camera-view" class="mt-3 w-full aspect-video bg-gray-900 rounded-lg flex flex-col items-center justify-center text-white relative overflow-hidden">
                        <div id="start-camera-ui" class="text-center">
                           <i data-lucide="camera" class="w-16 h-16 text-gray-500 mx-auto"></i>
                           <button id="start-camera-btn" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-full">
                               カメラを起動する
                           </button>
                        </div>
                        <video id="camera-stream" class="hidden absolute inset-0 w-full h-full object-cover"></video>
                        <div id="capture-ui" class="hidden absolute inset-0 flex-col items-center justify-end p-4 bg-black bg-opacity-25">
                           <button id="capture-btn" class="w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-white flex items-center justify-center shadow-lg">
                               <div class="w-12 h-12 sm:w-16 sm:h-16 rounded-full border-4 border-black"></div>
                           </button>
                        </div>
                    </div>
                </div>

                <div id="notes-container" class="text-xs text-gray-500 space-y-2 pt-2">
                    <div id="note-my-number" class="note-item">
                        <p><strong>マイナンバーカードの場合:</strong></p>
                        <ul class="list-disc list-inside">
                            <li>表面のみ撮影してください。裏面のマイナンバー（個人番号）は送らないでください。</li>
                            <li>有効期限内のものに限ります。</li>
                        </ul>
                    </div>
                     <div id="note-license" class="note-item hidden">
                        <p><strong>運転免許証の場合:</strong></p>
                        <ul class="list-disc list-inside">
                            <li>表面と裏面の両方を撮影してください。</li>
                             <li>変更事項がある場合は裏面の撮影も必須です。</li>
                        </ul>
                    </div>
                     <div id="note-health-insurance" class="note-item hidden">
                        <p><strong>健康保険証の場合:</strong></p>
                        <ul class="list-disc list-inside">
                            <li>「記号」「番号」「保険者番号」を付箋などで隠して撮影してください。</li>
                            <li>必ず有効な学生証も一緒に撮影・アップロードしてください。</li>
                        </ul>
                    </div>
                </div>

                 <div>
                    <a id="submit-btn" href="pending-verification.html" class="block text-center w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-full transition-colors pointer-events-none opacity-50">
                        撮影して提出する
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/lucide-static@latest/umd/lucide.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();

            const docTabs = document.querySelectorAll('.doc-tab');
            const noteItems = document.querySelectorAll('.note-item');
            const startCameraBtn = document.getElementById('start-camera-btn');
            const startCameraUI = document.getElementById('start-camera-ui');
            const captureUI = document.getElementById('capture-ui');
            const captureBtn = document.getElementById('capture-btn');
            const submitBtn = document.getElementById('submit-btn');
            const cameraStream = document.getElementById('camera-stream');


            // 書類タブの切り替え
            docTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    docTabs.forEach(t => t.classList.remove('tab-active'));
                    tab.classList.add('tab-active');

                    const docType = tab.getAttribute('data-doc');
                    noteItems.forEach(item => {
                        item.id === `note-${docType}` ? item.classList.remove('hidden') : item.classList.add('hidden');
                    });
                });
            });

            // カメラ起動ボタンの処理
            startCameraBtn.addEventListener('click', () => {
                startCameraUI.classList.add('hidden');
                cameraStream.classList.remove('hidden');
                captureUI.classList.remove('hidden');
                captureUI.classList.add('flex');
                
                // カメラを起動する（実際のカメラアクセス処理は省略）
                console.log('カメラを起動します...');
                
                // ダミーとして、2秒後に撮影ボタンを押せるようにし、提出ボタンを有効化
                setTimeout(() => {
                    console.log('撮影準備完了');
                    // 撮影ボタンが押されたら提出ボタンを有効化する
                    captureBtn.addEventListener('click', () => {
                        console.log('撮影しました');
                        submitBtn.classList.remove('pointer-events-none', 'opacity-50');
                        alert('撮影が完了しました。「撮影して提出する」ボタンを押して次へ進んでください。');
                    }, { once: true });
                }, 1500);
            });
        });
    </script>
</body>
</html>